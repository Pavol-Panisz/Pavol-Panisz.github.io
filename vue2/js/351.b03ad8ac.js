"use strict";(self["webpackChunkproject1"]=self["webpackChunkproject1"]||[]).push([[351],{7351:function(t,s,i){i.r(s),i.d(s,{default:function(){return E}});var e=i(2420),n=i(6764);const o=(0,e.Lk)("h1",null,"Lists",-1),l=(0,e.Lk)("div",{style:{"background-color":"aqua",width:"fit-content",padding:"20px 30px"}}," test div ",-1),p={key:0},h={id:"lists-brief-container"},r=(0,e.Lk)("br",null,null,-1),a=(0,e.Lk)("br",null,null,-1),d=(0,e.Lk)("br",null,null,-1);function u(t,s,i,u,c,g){const w=(0,e.g2)("AShoppingListBrief");return(0,e.uX)(),(0,e.CE)(e.FK,null,[o,l,c.shoppingLists?c.shoppingLists.error?((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.eW)(" Pri načítaní dát nastala chyba: "+(0,n.v_)(c.shoppingLists.error),1)],64)):((0,e.uX)(),(0,e.CE)(e.FK,{key:2},[(0,e.Lk)("button",{onClick:s[0]||(s[0]=t=>g.addNewList())}," add new list "),(0,e.Lk)("div",h,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(c.shoppingLists,((t,s)=>((0,e.uX)(),(0,e.Wv)(w,{ref_for:!0,ref:"listRefs",key:t.id,shoppingList:t},null,8,["shoppingList"])))),128))])],64)):((0,e.uX)(),(0,e.CE)("p",p,"Načítavam dáta")),r,a,d],64)}i(3926);var c=i(3955),g=i(6718);const w=["href"],f={key:0};function L(t,s,i,o,l,p){return(0,e.uX)(),(0,e.CE)("div",{href:`/shopping-lists/${i.shoppingList.id}`,onClick:s[0]||(s[0]=(0,g.D$)((t=>p.openShoppingListDetail(i.shoppingList.id)),["prevent"])),class:"shopping-list-brief"},[(0,e.Lk)("h2",null,(0,n.v_)(i.shoppingList.title),1),(0,e.Lk)("ul",null,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(i.shoppingList.items.slice(0,l.showItemCount),(t=>((0,e.uX)(),(0,e.CE)("li",{key:t.id},[(0,e.Lk)("span",{class:(0,n.C4)({"item-checked":t.is_checked})},(0,n.v_)(t.name)+" "+(0,n.v_)(t.value)+" "+(0,n.v_)(t.unit),3)])))),128)),i.shoppingList.items.length>l.showItemCount?((0,e.uX)(),(0,e.CE)("li",f," ... and "+(0,n.v_)(i.shoppingList.items.length-l.showItemCount)+" more ",1)):(0,e.Q3)("",!0)])],8,w)}var m={props:{shoppingList:{type:Object,default:{title:"no title",items:[],id:0}}},data(){return{showItemCount:3,debugWidth:0,debugHeight:0}},methods:{openShoppingListDetail(t){this.$router.push({name:"Shopping List - Detail",params:{id:t}})}}},v=i(8493);const k=(0,v.A)(m,[["render",L]]);var y=k;class C{constructor(t,s,i){this.x=t,this.y=s,this.w=i}}function b(t,s){t.sort(((t,s)=>t.w<s.w?1:t.w>s.w?-1:0));let i=new Array;i.push(new C(0,0,s));for(let e=0;e<t.length;e++){const s=t[e];let n=i[0],o=0,l=1e6;for(let t=0;t<i.length;t++)if(i[t].w>=s.w){const e=i[t].y+s.h;e<l&&(n=i[t],o=t,l=e)}s.x=n.x,s.y=n.y,i[o].x+=s.w,i[o].w-=s.w;const p=new C(s.x,s.y+s.h,s.w);i.push(p)}}var x={data(){return{shoppingLists:null,listDimensions:[],lastResizeTime:0,minResizeInterval:100}},created(){window.addEventListener("resize",this.handleWindowResize)},destroyed(){window.removeEventListener("resize",this.handleWindowResize)},async mounted(){try{const{data:{data:t}}=await c.A.get("https://shoppinglist.wezeo.dev/cms/api/v1/shopping-lists");this.shoppingLists=t,this.$nextTick((()=>{for(let t=0;t<this.shoppingLists.length;t++){let s=this.$refs.listRefs[t].$el,i=this.$refs.listRefs[t].shoppingList.title,e=new Proxy(s,{get(t,e){return"w"===e?(console.log(i,"w",s.offsetWidth+20),s.offsetWidth+20):"h"===e&&(console.log(i,"h",s.offsetHeight+20),s.offsetHeight+20)},set(t,i,e){if("x"===i)s.style.left=`${e}px`;else{if("y"!==i)return!1;s.style.top=`${e}px`}return!0}});this.listDimensions.push(e)}b(this.listDimensions,window.innerWidth)}))}catch(t){console.error("Error:",t),this.shoppingLists={error:t}}},components:{AShoppingListBrief:y},methods:{async addNewList(){try{var t=await c.A.post("https://shoppinglist.wezeo.dev/cms/api/v1/shopping-lists/",{title:"new list"});this.shoppingLists.push(t.data.data),console.log("succesfully added a new shopping list"),this.$router.push(`/shopping-list/${t.data.data.id}`)}catch(s){console.log(s)}},handleWindowResize(t){t.timeStamp-this.lastResizeTime>this.minResizeInterval&&(this.lastResizeTime=t.timeStamp,b(this.listDimensions,window.innerWidth))}}};const z=(0,v.A)(x,[["render",u]]);var E=z}}]);
//# sourceMappingURL=351.b03ad8ac.js.map