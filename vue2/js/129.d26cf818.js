"use strict";(self["webpackChunkproject1"]=self["webpackChunkproject1"]||[]).push([[129],{8129:function(t,e,i){i.r(e),i.d(e,{default:function(){return z}});var s=i(2420);const n={key:0},l=["value"],o={cellspacing:0,cellpadding:"5"},a=(0,s.Lk)("br",null,null,-1),u=(0,s.Lk)("br",null,null,-1),p=(0,s.Lk)("br",null,null,-1),h=(0,s.Lk)("br",null,null,-1),c=(0,s.Lk)("br",null,null,-1),d=(0,s.Lk)("b",null,"note:",-1);function r(t,e,i,r,m,g){const k=(0,s.g2)("ShoppingListDetailItem");return m.shoppingList?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.Lk)("input",{value:m.shoppingList.title,onChange:e[0]||(e[0]=t=>g.changedTitle(t)),id:"title"},null,40,l),(0,s.Lk)("table",o,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(m.shoppingList.items,(t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.id},[(0,s.bF)(k,{onChangedItem:g.changeItem,onDeletedItem:g.deleteItem,item:t},null,8,["onChangedItem","onDeletedItem","item"])])))),128)),(0,s.Lk)("button",{onClick:e[1]||(e[1]=t=>g.newItem())},"new item")]),a,(0,s.Lk)("button",{onClick:e[2]||(e[2]=t=>g.deleteShoppingList())}," delete list 💀 "),u,p,(0,s.Lk)("button",{onClick:e[3]||(e[3]=t=>g.goToAllListsView())}," back "),h,c,d,(0,s.eW)(" to delete an item, rename it to an empty string ")],64)):((0,s.uX)(),(0,s.CE)("p",n,"Načítavam dáta"))}i(3926);var m=i(3955),g=i(6718),k=i(6764);const L=(0,s.Lk)("option",{value:"piece"},"Piece",-1),w=(0,s.Lk)("option",{value:"package"},"Package",-1),v=(0,s.Lk)("option",{value:"grams"},"Grams",-1),y=(0,s.Lk)("option",{value:"kilograms"},"Kilograms",-1),$=[L,w,v,y];function b(t,e,i,n,l,o){return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.item.name=t),onChange:e[1]||(e[1]=t=>o.handleChange(i.item)),class:"item-attribute-input"},null,544),[[g.Jo,i.item.name]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>i.item.value=t),onChange:e[3]||(e[3]=t=>o.handleChange(i.item)),class:"item-attribute-input"},null,544),[[g.Jo,i.item.value]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>i.item.unit=t),onChange:e[5]||(e[5]=t=>o.handleChange(i.item)),class:"item-attribute-input"},$,544),[[g.u1,i.item.unit]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>i.item.is_checked=t),onChange:e[7]||(e[7]=t=>o.handleChange(i.item)),type:"checkbox"},null,544),[[g.lH,i.item.is_checked]])]),(0,s.Lk)("td",null,"id: "+(0,k.v_)(i.item.id),1)],64)}var C={emits:["changedItem","deletedItem"],props:{item:{type:Object,required:!0}},data(){return{}},methods:{handleChange(t){""===t.name?this.$emit("deletedItem",t):this.$emit("changedItem",t)}}},f=i(8493);const I=(0,f.A)(C,[["render",b]]);var A=I,E={data(){return{shoppingList:null}},async mounted(){try{const{data:{data:t}}=await m.A.get("https://shoppinglist.wezeo.dev/cms/api/v1/shopping-lists");this.shoppingList=t.find((({id:t})=>t==this.$route.params.id))}catch(t){console.error("Error:",t),this.shoppingList={error:t}}},components:{ShoppingListDetailItem:A},methods:{async deleteShoppingList(){try{var t=await m.A.delete(`https://shoppinglist.wezeo.dev/cms/api/v1/shopping-lists/${this.$route.params.id}`);200==t.status?(console.log("succesfully deleted the shopping list"),this.goToAllListsView()):console.log(`unknown error (but not outright exception) while  trying to delete a list. status ${t.status}`)}catch(e){console.log(e)}},goToAllListsView(){this.$router.push({name:"Shopping List - List"})},async changedTitle(t){function e(t){let e=t.title;t.title="",t.title=e}let i=t.target.value;if(""!=i)try{var s=await m.A.put(`https://shoppinglist.wezeo.dev/cms/api/v1/shopping-lists/${this.$route.params.id}`,{title:i});200==s.status?(this.shoppingList.title=i,console.log("succesfully renamed this list")):(console.log("unsuccesfully renamed this list. reverting to old title"),e(this.shoppingList))}catch(n){console.log(n),e(this.shoppingList)}else e(this.shoppingList)},async changeItem(t){try{var e=await m.A.put(`https://shoppinglist.wezeo.dev/cms/api/v1/shopping-lists/${this.$route.params.id}/items/${t.id}`,{name:t.name,value:t.value,unit:t.unit,is_checked:t.is_checked});200==e.status?console.log(`succesfully changed item with id ${t.id}`):console.log(`unsuccesfully changed item with id ${t.id}. response status: ${e.status}`)}catch(i){404==i.response.status?console.log(`Error 404 not found while trying to change item in list ${this.$route.params.id}, item id ${t.id}. Item most likely doesn't exist anymore`):console.log(`Unknown error while trying to change item with id ${t.id}`)}},async deleteItem(t){try{var e=await m.A.delete(`https://shoppinglist.wezeo.dev/cms/api/v1/shopping-lists/${this.$route.params.id}/items/${t.id}`);200==e.status?(console.log(`succesfully deleted item with id ${t.id}`),this.shoppingList.items=this.shoppingList.items.filter((e=>e.id!=t.id))):console.log(`no success while deleting item with id ${t.id}, but we didnt get an exception either`)}catch(i){console.log(`Error while trying to delete item with id ${t.id}`)}},async newItem(){try{var t=await m.A.post(`https://shoppinglist.wezeo.dev/cms/api/v1/shopping-lists/${this.$route.params.id}/items/`,{name:"test new item",value:"1",unit:"piece",is_checked:!1});if(201==t.status){this.shoppingList.items.push(t.data.data);let e=t.data.data;console.log(`succesfully created new item with id ${e.id}`)}else console.log("no success with creating a new item, but we didn't get an outright exception")}catch(e){console.log(e)}}}};const V=(0,f.A)(E,[["render",r]]);var z=V}}]);
//# sourceMappingURL=129.d26cf818.js.map