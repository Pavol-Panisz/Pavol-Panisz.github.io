"use strict";(self["webpackChunkproject1"]=self["webpackChunkproject1"]||[]).push([[605],{4605:function(t,i,s){s.r(i),s.d(i,{default:function(){return D}});var e=s(2420),n=s(6764);const o=(0,e.Lk)("h1",null,"Lists",-1),h={key:0},l={id:"lists-brief-container"},p=(0,e.Lk)("br",null,null,-1),r=(0,e.Lk)("br",null,null,-1),d=(0,e.Lk)("br",null,null,-1);function a(t,i,s,a,u,c){const g=(0,e.g2)("AShoppingListBrief");return(0,e.uX)(),(0,e.CE)(e.FK,null,[o,u.shoppingLists?u.shoppingLists.error?((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.eW)(" Pri načítaní dát nastala chyba: "+(0,n.v_)(u.shoppingLists.error),1)],64)):((0,e.uX)(),(0,e.CE)(e.FK,{key:2},[(0,e.Lk)("button",{onClick:i[0]||(i[0]=t=>c.addNewList())}," add new list "),(0,e.Lk)("div",l,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(u.shoppingLists,((t,i)=>((0,e.uX)(),(0,e.Wv)(g,{key:t.id,title:t.title,items:t.items,id:t.id,left:t.left,top:t.top,index:i,onReceivedChildDimensions:c.receivedChildDimensions},null,8,["title","items","id","left","top","index","onReceivedChildDimensions"])))),128))])],64)):((0,e.uX)(),(0,e.CE)("p",h,"Načítavam dáta")),p,r,d],64)}s(3926);var u=s(3955),c=s(6718);const g=["href"],m={key:0};function w(t,i,s,o,h,l){return(0,e.uX)(),(0,e.CE)("div",{href:`/shopping-lists/${s.id}`,onClick:i[0]||(i[0]=(0,c.D$)((t=>l.openShoppingListDetail(s.id)),["prevent"])),class:"shopping-list-brief",style:(0,n.Tr)({left:this.left+"px",top:this.top+"px"})},[(0,e.Lk)("h2",null,(0,n.v_)(s.title),1),(0,e.Lk)("ul",null,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(s.items.slice(0,h.showItemCount),(t=>((0,e.uX)(),(0,e.CE)("li",{key:t.id},[(0,e.Lk)("span",{class:(0,n.C4)({"item-checked":t.is_checked})},(0,n.v_)(t.name)+" "+(0,n.v_)(t.value)+" "+(0,n.v_)(t.unit),3)])))),128)),s.items.length>h.showItemCount?((0,e.uX)(),(0,e.CE)("li",m," ... and "+(0,n.v_)(s.items.length-h.showItemCount)+" more ",1)):(0,e.Q3)("",!0)])],12,g)}var L={emits:["received-child-dimensions"],props:{title:String,items:Object,id:Number,index:Number,top:{type:Number,default:0},left:{type:Number,default:0}},data(){return{showItemCount:3,debugWidth:0,debugHeight:0}},mounted(){const t={debugName:this.title,index:this.index,w:this.$el.offsetWidth+20,h:this.$el.offsetHeight+20};this.debugWidth=t.w,this.debugHeight=t.h,this.$emit("received-child-dimensions",t)},methods:{openShoppingListDetail(t){this.$router.push({name:"Shopping List - Detail",params:{id:t}})}}},v=s(8493);const f=(0,v.A)(L,[["render",w]]);var y=f;class k{constructor(t,i,s){this.x=t,this.y=i,this.w=s}}function C(t,i){t.sort(((t,i)=>t.w<i.w?1:t.w>i.w?-1:0));let s=new Array;s.push(new k(0,0,i));for(let e=0;e<t.length;e++){const i=t[e];let n=s[0],o=0,h=1e6;for(let t=0;t<s.length;t++)if(s[t].w>=i.w){const e=s[t].y+i.h;e<h&&(n=s[t],o=t,h=e)}i.x=n.x,i.y=n.y,s[o].x+=i.w,s[o].w-=i.w;const l=new k(i.x,i.y+i.h,i.w);s.push(l)}}var b={data(){return{shoppingLists:null,shoppingListsDimPos:new Array,lastResizeTime:0,minResizeInterval:100}},created(){window.addEventListener("resize",this.handleWindowResize)},destroyed(){window.removeEventListener("resize",this.handleWindowResize)},async mounted(){try{const{data:{data:t}}=await u.A.get("https://shoppinglist.wezeo.dev/cms/api/v1/shopping-lists");this.shoppingLists=t}catch(t){console.error("Error:",t),this.shoppingLists={error:t}}},components:{AShoppingListBrief:y},methods:{async addNewList(){try{var t=await u.A.post("https://shoppinglist.wezeo.dev/cms/api/v1/shopping-lists/",{title:"new list"});201==t.status?(this.shoppingLists.push(t.data.data),console.log("succesfully added a new shopping list"),this.$router.push(`/shopping-list/${t.data.data.id}`)):console.log(`unknown error (but not outright exception) while  trying to create a new list. status ${t.status}`)}catch(i){console.log(i)}},receivedChildDimensions(t){this.shoppingListsDimPos.push(t),this.shoppingListsDimPos.length===this.shoppingLists.length&&this.setListPositions()},setListPositions(){C(this.shoppingListsDimPos,window.innerWidth);for(let t=0;t<this.shoppingLists.length;t++){const i=this.shoppingListsDimPos[t].index;this.shoppingLists[i].left=this.shoppingListsDimPos[t].x,this.shoppingLists[i].top=this.shoppingListsDimPos[t].y}},handleWindowResize(t){t.timeStamp-this.lastResizeTime>this.minResizeInterval&&(this.lastResizeTime=t.timeStamp,this.setListPositions())}}};const x=(0,v.A)(b,[["render",a]]);var D=x}}]);
//# sourceMappingURL=605.199b48fe.js.map